<UserControl
    x:Class="CMiX.Views.Geometry"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:CMiX="clr-namespace:CMiX"
    xmlns:Views="clr-namespace:CMiX.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    d:DesignHeight="307.445"
    d:DesignWidth="362.445"
    mc:Ignorable="d">
    <UserControl.Resources>
        <ResourceDictionary>
            <CMiX:BoolInverterConverter x:Key="BoolInverter" />
        </ResourceDictionary>
    </UserControl.Resources>
    <Border             
        Background="{StaticResource DarkerColor}"
        Padding="4"
        CornerRadius="2">
        <StackPanel>
            <Grid Height="25" Margin="0,1,0,4">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="0.5*" />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <TextBlock Text="GEOMETRY" Foreground="{StaticResource TextBase}" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                <CMiX:Counter
                    Grid.Column="1"
                    Height="25"
                    HorizontalAlignment="Stretch"
                    Count="{Binding Count, Mode=TwoWay}" />
            </Grid>
            <Border BorderThickness="1" BorderBrush="{StaticResource DarkColor}"/>
            <CMiX:FileSelector
                x:Name="GeometrySelector"
                    Height="150"
                    Title="Models"
                    Margin="0, 4, 0, 2"
                SelectedItems="{Binding GeometryPaths, Mode=TwoWay}"/>
            <Grid Height="25" Margin="0,1,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="0.5*" />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <ToggleButton
                    Content="{Binding SelectedName, ElementName=SpriteSelectedTranslate, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                    IsHitTestVisible="{Binding ElementName=SpritePopupTranslate, Path=IsOpen, Converter={StaticResource BoolInverter}}"
                    Style="{StaticResource ToggleButtonBase}" />
                <Popup
                    Width="432"
                    AllowsTransparency="True"
                    IsOpen="{Binding IsChecked, ElementName=SpriteTranslateStyle}"
                    Placement="Right"
                    PlacementTarget="{Binding ElementName=SpriteTranslateStyle}"
                    StaysOpen="False">
                    <CMiX:TranslateSelector x:Name="SpriteSelectedTranslate" SelectedName="{Binding DataContext.SpriteSelectedTranslate, ElementName=Ch_Parameters, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />
                </Popup>
                <CMiX:CustomSlider
                    Grid.Column="2"
                    Margin="1"
                    Caption="Translate"
                    Tag="SprTra"
                    Value="{Binding TranslateAmount, Mode=TwoWay}" />
            </Grid>
            <Grid Height="25" Margin="0,1,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="0.5*" />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <ToggleButton
                    Content="{Binding SelectedName, ElementName=SpriteSelectedScale, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                    IsHitTestVisible="{Binding ElementName=SpritePopupScale, Path=IsOpen, Converter={StaticResource BoolInverter}}"
                    Style="{StaticResource ToggleButtonBase}" />
                <Popup
                    Width="432"
                    AllowsTransparency="True"
                    IsOpen="{Binding IsChecked, ElementName=SpriteScaleStyle}"
                    Placement="Center"
                    PlacementTarget="{Binding ElementName=Ch_Parameters}"
                    StaysOpen="False">
                    <CMiX:ScaleSelector 
                        SelectedName="{Binding DataContext.SpriteSelectedScale, ElementName=Ch_Parameters, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />
                </Popup>
                <CMiX:CustomSlider
                    Grid.Column="2"
                    Margin="1"
                    Caption="Scale"
                    Value="{Binding ScaleAmount, Mode=TwoWay}" />
            </Grid>
            <Grid Height="25" Margin="0,1,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="0.5*" />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <CMiX:RotationSelector />
                <CMiX:CustomSlider
                    Grid.Column="2"
                    Margin="1"
                    Caption="Rotate"
                    Value="{Binding RotationAmount, Mode=TwoWay}" />
            </Grid>
            <Grid
                Height="25"
                Margin="0, 2, 0, 0"
                DockPanel.Dock="Bottom">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <ToggleButton
                    Grid.Column="0"
                    Content="AR"
                    DockPanel.Dock="Bottom"
                    IsChecked="{Binding KeepAspectRatio, Mode=TwoWay}"
                    Style="{DynamicResource ToggleButtonBase}" />
                <ToggleButton
                    Grid.Column="1"
                    Content="3D"
                    DockPanel.Dock="Right"
                    IsChecked="{Binding Is3D, Mode=TwoWay}"
                    Style="{DynamicResource ToggleButtonBase}" />
            </Grid>
        </StackPanel>
    </Border>
</UserControl>
